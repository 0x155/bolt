{% import '_sub_pretty.twig' as pretty %}
<section>
    <h2>
    {% if filtered %}
        {{ 'Recent modifications' }}
    {% else %}
        {{ __('Last modified %contenttypes%',{'%contenttypes%':contenttype.name}) }}
    {% endif %}
    </h2>
    <ul>
    {% if changelog is defined %}
        {% for index, entry in changelog %}
            <li>
                {% set action_name = action_map[entry.mutation_type] %}
                {% if filtered %}
                    {% set title = contenttype.singular_name %}
                {% else %}
                    {% if entry.title %}
                        {% set title = pretty.contentlink_by_id(contenttype, entry.title, entry.contentid) %}
                    {% else %}
                        {% set title = __('%name% #%id%', { '%name%': contenttype.singular_name, '%id%': entry.contentid }) %}
                    {% endif %}
                {% endif %}
               № {{index + 1}}. {{ title }} {{ pretty.changelogmutation(entry.mutation_type) }} by {{ entry.username }} <small>(<time class="moment" datetime="{{ entry.date|date("c") }}" title="{{ entry.date }}">{{ entry.date }}</time>)</small>
            </li>
        {% else %}
            <li><em>{{ __('No latest %contenttype%',{'%contenttype%':contenttype.name}) }}.</em></li>
        {% endfor %}
    {% else %}
        {% for content in latest %}
            <li>
               № {{content.id}}. {{ pretty.contentlink(contenttype, content) }}<small>(<time class="moment" datetime="{{ content.datechanged|date("c") }}" title="{{ content.datechanged }}">{{ content.datechanged }}</time>)</small>
            </li>
        {% else %}
            <li><em>{{ __('No latest %contenttype%',{'%contenttype%':contenttype.name}) }}.</em></li>
        {% endfor %}
    {% endif %}
    </ul>
</section>
