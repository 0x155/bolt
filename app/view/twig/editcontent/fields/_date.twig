{#=== OPTIONS ========================================================================================================#}

{% set option = {
    class:     ('form-control ' ~ field.class)|trim,
    variant:   field.variant,
    label:     field.label,
    info:      field.info|default(''),
    options:   field.options.datepicker|default(''),
    default:   (context.content.id == null and field.default) ? context.content.get(contentkey)|date('Y-m-d') : null,
    required:  field.required|default(false),
    errortext: field.error|default(''),
} %}

{#=== INIT ===========================================================================================================#}

{% set attr_date = {
    id:         key,
    name:       name,
    has_time:   false,
    value:      (context.content.get(contentkey) != null) ? context.content.get(contentkey)|date('Y-m-d') : option.default,
    required:   option.required,
    class:      option.class,
    errortext:  option.errortext,
    options:    option.options,
} %}

{% set class = option.variant == 'inline' ? ['col-sm-3 control-label', 'col-sm-9'] : ['col-xs-12', 'col-xs-12'] %}

{#=== FIELDSET =======================================================================================================#}

{% extends '_base/_fieldset.twig' %}

{% block fieldset_type 'date' %}

{% block fieldset_label %}
    <label class="{{ class[0] }}">{{ (option.info) ? macro.infopop(labelkey, option.info) : labelkey }}</label>
{% endblock fieldset_label %}

{% block fieldset_controls %}
    <div class="{{ class[1] }}">
        {{ macro.input_datetime(attr_date) }}
    </div>
{% endblock fieldset_controls %}
