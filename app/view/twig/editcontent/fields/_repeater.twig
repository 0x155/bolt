{% set repeatfieldvals = context.content.get('contentkey') %}
{% set labelkey = field.label ?: key|ucfirst %}

<fieldset class="bolt-field-repeater" data-bolt-widget="fieldRepeater">
    <legend class="sr-only">{{ labelkey }}</legend>
    <label class="main col-xs-12">{{ labelkey }}</label>

    {# Prefix #}
    {% if field.prefix is defined and field.prefix is not empty %}
        <div class="prefix">
            {{ field.prefix|markdown }}
        </div>
    {% endif %}

    <div class="repeater-slot">
        <script type="text/template">
            {% set index = '#' %}
            {% include '@bolt/editcontent/fields/_repeater-group.twig' %}
        </script>

        {# In cases where we don't have any values set, the we show a single set of fields by default #}
        {% if not repeatfieldvals.length %}
            {% set index = '0' %}
            {% include '@bolt/editcontent/fields/_repeater-group.twig' %}
        {% else %}
            {% for repeatfieldset in repeatfieldvals %}
            {% endfor %}
        {% endif %}
    </div>

    <div class="repeater-add">
        <button type="button" class="btn btn-default add-button">
            <i class="fa fa-plus"></i> Add new {{ labelkey }} set
        </button>
    </div>

</fieldset>
